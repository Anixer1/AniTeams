<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="search.css">
    <title>Aniteams-Filter</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap');
        </style>
</head>
<body>
    <header>
        <nav class="navbar">
         <div class="container">
             <i class="fa-solid fa-bars fa-2x bars"></i>
             <h2><span>Aniteams</span></h2>
             <input type="search" name="Search" id="search-bar" placeholder="Search">
             <a class="nav-links" href="animeindex.html">Home</a>
             <a class="nav-links" href="">Subbed Anime</a>
             <a class="nav-links" href="">Dubbed Anime</a>
             <button class="login">Login</button>
         </div>

         <div class="menu" id="menu">
            <ul class="sidebar">
            <button class="closemenu" id="closemenu"> <i class="fa-solid fa-angle-left" fa--1x close></i> Close Menu </button>
            <li><a href="animeindex.html">Home</a></li>
            <li><a href="">Subbed Anime</a></li>
            <li><a href="">Dubbed Anime</a></li>
            <li><a href="">Most Popular</a></li>
            <li><a href="">TV Series</a></li>
            <li><a href="">Specials</a></li>
            <li><a href="">Movies</a></li>
            <li><a href=""">Top Rated</a></li>
        </ul>
        </div>
     </nav>
     <main>
        <section> <!-- Filter box Sectiom-->
            <div class="category-filter">
                <form method="get" id="filter-form"> <!--Used method "get" and ID so u can add javascript-->
                    <input type="hidden" name="keyword" value="">
                    
                    <div>
                        <p>Filter</p>
                        <div class="filter-options">
                            <div class="filter-item">
                                <label for="type">Type</label>
                                <select id="type" name="type">
                                    <option value="all">All</option>
                                    <option value="Movie">Movie</option>
                                    <option value="TV">TV</option>
                                    <option value="ONA">ONA</option>
                                    <option value="OVA">OVA</option>
                                    <option value="Specials">Specials</option>
                                    <option value="Season">Season</option>
                                    <!-- Other options -->
                                </select>
                            </div>
                            <div class="filter-item">
                                <label for="status">Status</label>
                                <select id="status" name="status">
                                    <option value="all">All</option>
                                    <option value="Current Airing">Current Airing</option>
                                    <option value="Finished Airing">Finished Airing</option>
                                    <option value="Not Yet Aired">Not Yet Aired</option>
                                    <!-- Other options -->
                                </select>
                            </div>
                            <div class="filter-item">
                                <label for="Rated">Rated</label>
                                <select id="Rated" name="Rated">
                                    <option value="all">All</option>
                                    <option value="G">G</option>
                                    <option value="PG">PG</option>
                                    <option value="R">R</option>
                                    <option value="R+">R+</option>
                                    <option value="Rx">Rx</option>
                                    <!-- Other options -->
                                </select>
                        </div>
                        <div class="filter-item">
                            <label for="Season">Season</label>
                            <select id="Season" name="Season">
                                <option value="all">All</option>
                                <option value="Spring">Spring</option>
                                <option value="Summer">Summer</option>
                                <option value="Fall">Fall</option>
                                <option value="Winter">Winter</option>
                                <option value=""></option>
                            </select>
                    </div>
                    
                    <div class="filter-item">
                        <label for="Score">Score</label>
                        <select id="Score" name="Score">
                            <option value="all">All</option>
                            <option value="(1)">(1) Disgusting</option>
                            <option value="(2)">(2) Horrible</option>
                            <option value="(3)">(3) Very Bad</option>
                            <option value="(4)">(4) Bad</option>
                            <option value="(5)">(5) Mid</option>
                            <option value="(6)">(6) Fine</option>
                            <option value="(7)">(7) Good</option>
                            <option value="(8)">(8) Very Good</option>
                            <option value="(9)">(9) Great</option>
                            <option value="(10)">(10) Goated</option>
                        </select>
                </div>

                <div class="filter-item">
                    <label for="Language">Language</label>
                    <select id="Language" name="Language">
                        <option value="all">All</option>
                        <option value="SUB">SUB</option>
                        <option value="DUB">DUB</option>
                        <option value="SUB & DUB">SUB & DUB</option>
                    </select>
            </div>
            <div class="filter-item">
                <label for="start-date">Start Date</label>
                <select class="start-year" name="Start-date-year">
                    <option value="Year">Year</option>
                </select>
                <select class="start-month" name="Start-date-month">
                    <option value="Month">Month</option>
                </select>
                <select class="start-day" name="Start-date-day">
                    <option value="Day">Day</option>
                </select>
            </div>

            <div class="filter-item">
                <label for="end-date">End Date</label>
                <select class="start-year-2" name="Start-date-year">
                    <option value="Year">Year</option>
                </select>
                <select class="start-month-2" name="Start-date-month">
                    <option value="Month">Month</option>
                </select>
                <select class="start-day-2" name="Start-date-day">
                    <option value="Day">Day</option>
                </select>
            </div>
            
            <div class="filter-item">
                <label for="sort">Sort</label>
                <select id="sort" name="sort">
                    <option value=">Default">Default</option>
                    <option value="Recently Updated">Recently Updated</option>
                    <option value="Recently Added">Recently Added</option>
                    <option value="Score">Score</option>
                    <option value="Named A-Z">Named A-Z</option>
                    <option value=">Relaease Date">Relaease Date</option>
                    <option value="Most Watched">Most Watched</option>
                </select>
                </div>
            
                <div class="genre-filter">
                    <p>Genre</p>
                    </div>
                    <div class="ni-list" id="genre-list">
    <input type="hidden" id="genre-ids" name="genres" value="1">
    <!-- Genre items will be populated here dynamically -->
</div>
                        <script>
                            
document.addEventListener("DOMContentLoaded", () => {
    const apiUrl = 'https://aniwatch-api-net.vercel.app/api/v2/hianime/home'; // Replace with your actual API URL
    const selectedGenres = new Set(); // Track selected genres
    const genreList = document.getElementById('genre-list'); // Genre list container

    // Fetch genres from the API
    fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
            if (data.success && data.data && data.data.genres) {
                const genres = data.data.genres; // Extract the genres array

                // Populate genres dynamically
                genres.forEach((genre) => {
                    const genreItem = document.createElement('div');
                    genreItem.classList.add('f-genre-item');
                    genreItem.setAttribute('data-id', genre);
                    genreItem Append the genre item to the list
                    genreList.appendChild(genreItem);
                });

                // Apply event listeners to dynamically created items
                addGenreClickListeners();
            } else {
                console.error('Invalid API response');
            }
        })
        .catch(error => {
            console.error('Error fetching data:', error);
        });

    // Function to add click listeners to genre items
    function addGenreClickListeners() {
        const genreItems = document.querySelectorAll('.f-genre-item');
        genreItems.forEach(item => {
            item.addEventListener('click', () => {
                const genre = item.getAttribute('data-id');

                if (selectedGenres.has(genre)) {
                    // Remove from selected genres and toggle class
                    selectedGenres.delete(genre);
                    item.classList.remove('selected');
                } else {
                    // Add to selected genres and toggle class
                    selectedGenres.add(genre);
                    item.classList.add('selected');
                }

                // Update the URL parameters
                updateUrlParams(selectedGenres);
            });
        });
    }

    // Function to update URL parameters
    function updateUrlParams(genresSet) {
        const url = new URL(window.location.href);
        if (genresSet.size > 0) {
            // Add genres as a comma-separated list
            url.searchParams.set('genre', Array.from(genresSet).join(','));
        } else {
            // Remove the genre parameter if no genres are selected
            url.searchParams.delete('genre');
        }
        window.history.replaceState(null, '', url);
    }
});
                        </script>
                            
                        <div class="filter-button-con">
                            <button class="filter-button">
                                Filter
                            </button>
                        </div>
                    </div>
        </form>
                         

            </div>
        
        </section>
    </main>
        
                      
        <script>
        const bars = document.querySelector('.bars');
document.getElementById("closemenu").onclick = function(){
    document.getElementById("menu").style.display = "none";
}

// Toggle menu and icon animation
bars.onclick = function(){
    document.getElementById("menu").style.display = "flex";
}
document.addEventListener("DOMContentLoaded", function() {
  document.getElementById("menu").style.display = "none";
});
// Select all elements with the given class names
const startYearSelects = document.querySelectorAll('.start-year, .start-year-2');
startYearSelects.forEach(startYearSelect => {
    for (let year = 2024; year >= 1917; year--) {
        const option = document.createElement('option');
        option.value = year;
        option.textContent = year;
        startYearSelect.appendChild(option);
    }
});
// Month dropdown menu javascript for the filter search
const startMonthSelects = document.querySelectorAll('.start-month, .start-month-2');
const months = [
    'January', 'February', 'March', 'April', 'May', 'June',
    'July', 'August', 'September', 'October', 'November', 'December'
];
startMonthSelects.forEach(startMonthSelect => {
    for (let month = 0; month < months.length; month++) {
        const option = document.createElement('option');
        option.value = month + 1;  // Month as numeric value (1-12)
        option.textContent = months[month]; // Month name as text
        startMonthSelect.appendChild(option);
    }
});

const startDaySelects = document.querySelectorAll('.start-day, .start-day-2');
const days = [
    '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21',
    '22', '23', '24', '25', '26', '27', '28', '29', '30', '31'
];
startDaySelects.forEach(startDaySelect => {
    for (let day = 0; day < days.length; day++) {
        const option = document.createElement('option');
        option.value = days[day];  // Use the day directly
        option.textContent = days[day]; // Display day as text
        startDaySelect.appendChild(option);
    }
});


     </script>
        
  
     <script src="https://kit.fontawesome.com/54a003e4f7.js" crossorigin="anonymous"></script>
                        <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
<script>eruda.init();</script>
</body>
</html>
